---
title: "Values and Types"
description: "Learn about DOL's type system and typed gen declarations"
lesson: 2
track: "dol-fundamentals"
duration: "15 minutes"
concepts: ["primitive types", "typed fields", "generics", "type annotations"]
prev: "/dol/tutorials/001-hello-dol"
next: "/dol/tutorials/003-functions"
---

# Values and Types

In the previous lesson, we declared properties without specifying their types. DOL supports a rich type system that lets you be precise about what values your specifications expect.

## Simple vs Typed Genes

DOL has two syntactic styles:

**Simple (Metal DOL)** - untyped properties:
```dol
gen hello.world {
  message has content
  message has sender
}
```

**Typed (Full DOL)** - with type annotations:
```dol
pub gen Message {
  has content: String
  has sender: String
  has timestamp: u64
}
```

Typed genes provide stronger guarantees and enable code generation to target languages like Rust.

## Primitive Types

DOL includes these primitive types:

| Type | Description | Examples |
|------|-------------|----------|
| `Int8`, `Int16`, `Int32`, `Int64` | Signed integers | `-1`, `42`, `1000` |
| `UInt8`, `UInt16`, `UInt32`, `UInt64` | Unsigned integers | `0`, `255`, `65535` |
| `Float32`, `Float64` | Floating point | `3.14`, `-0.5` |
| `Bool` | Boolean | `true`, `false` |
| `String` | UTF-8 text | `"hello"` |
| `Char` | Unicode scalar | `'a'`, `'\n'` |
| `Void` | Unit/no value | `()` |

## Typed Gene Example

Here's a typed gen from the DOL codebase:

```dol
module dol.token @ 0.4.0

docs {
  Token span tracks the location of tokens in source code.
}

/// Source location information
pub gen Span {
  has start: u32
  has end: u32
  has file_id: u32
}
```

Note the differences from simple genes:
- `module ... @ version` declares the module and version
- `pub` makes the gen publicly visible
- Fields use `has name: Type` syntax
- `///` provides inline documentation

## Collection Types

DOL has built-in collection types:

```dol
pub gen Container {
  has tags: List<String>
  has metadata: Map<String, String>
  has resources: Option<ResourceSpec>
}

docs {
  Containers can have multiple tags, key-value metadata,
  and an optional resource specification.
}
```

| Type | Description |
|------|-------------|
| `List<T>` | Ordered sequence of T |
| `Map<K, V>` | Key-value mapping |
| `Option<T>` | Optional value (Some or None) |
| `Box<T>` | Heap-allocated value (for recursive types) |

## Enum Types

Define enumerated types inline with `enum`:

```dol
/// Container lifecycle states
pub gen ContainerState {
  type: enum {
    Created,
    Starting,
    Running,
    Paused,
    Stopping,
    Stopped,
    Removing,
    Removed
  }
}

docs {
  ContainerState represents the discrete states a container
  can exist in during its lifecycle. Transitions between
  states are atomic and authenticated.
}
```

Enum variants can also carry data:

```dol
pub gen Change {
  type: enum {
    /// Field added
    Added { name: String, ty: TypeExpr, default_value: Option<Expr> },
    /// Field removed
    Removed { name: String },
    /// Field type changed
    Changed { name: String, from: TypeExpr, to: TypeExpr },
    /// Field renamed
    Renamed { old_name: String, new_name: String }
  }
  has span: Span
}

docs {
  A Change describes a single modification in an evolution,
  tracking schema migrations between versions.
}
```

## Generic Types

Define genes that work with any type using type parameters:

```dol
/// Generic field within a gene
pub gen Field<T> {
  has name: String
  has value: T
  has is_pub: Bool = false
  has span: Span
}

docs {
  A Field represents a named component of a gen with an
  optional default value. The type parameter T allows
  fields to hold any type.
}
```

## Default Values

Fields can have default values:

```dol
pub gen GeneDecl {
  has name: String
  has is_pub: Bool = false
  has type_params: List<TypeParam> = []
  has fields: List<Field>
  has methods: List<FunctionDecl>
  has constraints: List<ConstraintDecl>
  has exegesis: Option<String>
  has span: Span
}
```

When `is_pub` is not specified, it defaults to `false`. When `type_params` is not specified, it defaults to an empty list.

## Recursive Types

For types that reference themselves, use `Box<T>`:

```dol
pub gen TypeExpr {
  type: enum {
    /// Simple type
    Named { path: List<String> },

    /// Generic: List<T>, Map<K, V>
    Generic { name: String, args: List<TypeExpr> },

    /// Function: (A, B) -> C
    Function { params: List<TypeExpr>, ret: Box<TypeExpr> },

    /// Tuple: (A, B, C)
    Tuple { elements: List<TypeExpr> },

    /// Optional: T?
    Optional { inner: Box<TypeExpr> }
  }
  has span: Span
}

docs {
  TypeExpr represents types in DOL source code. Recursive
  types like Function and Optional use Box<T> to avoid
  infinite size at compile time.
}
```

## Self Type

Inside genes and traits, `Self` refers to the current type:

```dol
pub gen Point {
  has x: f64
  has y: f64

  fun distance_to(other: Self) -> f64 {
    val dx = this.x - other.x
    val dy = this.y - other.y
    return (dx * dx + dy * dy).sqrt()
  }
}
```

## Reference and Pointer Types

DOL supports references and pointers:

```dol
pub gen TypeExpr {
  type: enum {
    /// Reference: &T, &mut T
    Reference { inner: Box<TypeExpr>, is_mut: Bool },

    /// Pointer: *T, *mut T
    Pointer { inner: Box<TypeExpr>, is_mut: Bool }
  }
}
```

## Type Aliases

Give types shorter names:

```dol
type NodeId = UInt64
type Position = (Float64, Float64, Float64)
type Callback = (Event) -> Bool

pub gen NetworkNode {
  has id: NodeId
  has position: Position
  has on_message: Option<Callback>
}
```

## Key Takeaways

- DOL has two styles: simple (untyped) and full (typed)
- Primitive types: integers, floats, strings, booleans
- Collection types: `List<T>`, `Map<K,V>`, `Option<T>`
- Define enums with `type: enum { ... }`
- Use generics with type parameters: `gen Name<T> { ... }`
- Default values: `has field: Type = default`
- Recursive types use `Box<T>`

## Practice Exercise

Create a typed gen for a "blog post" with:
- `id: u64`
- `title: String`
- `body: String`
- `status: enum { Draft, Published, Archived }`
- `tags: List<String>`
- `published_at: Option<Ui64>`

```dol
module blog @ 1.0.0

pub gen BlogPost {
  // Your typed fields here...
}

docs {
  // Your explanation here...
}
```

## Next Steps

In the next lesson, we'll learn how to add methods (functions) to our genes.

<div className="mt-8 flex justify-between">
  <a href="/dol/tutorials/001-hello-dol" className="btn-secondary inline-flex items-center gap-2">← Previous: Hello DOL</a>
  <a href="/dol/tutorials/003-functions" className="btn-primary inline-flex items-center gap-2">Next: Functions →</a>
</div>
